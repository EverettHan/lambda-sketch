//===================================================================
// COPYRIGHT DS SolidWorks Corporation 2011/10/19
//===================================================================
// SWXUtJournalEntry.cpp
// Header definition of class SWXUtJournalEntry
//===================================================================
//
// Usage notes:
//
//===================================================================
//  2011/10/19 Creation: Code generated by the 3DS wizard
//===================================================================

#ifndef SWXUtJournalEntry_H
#define SWXUtJournalEntry_H

#include "CATUnicodeString.h"
#include "SWXUtJournal.h"
#include "SWXUtVector.h"

class CATIDOMDocument_var;
class CATIDOMElement_var;
class SWXUtJournalFixInfo;

//-----------------------------------------------------------------------

class ExportedBySWXUtJournal SWXUtJournalEntry
{
public:

	enum EntryType
	{
		Untyped,
		StartCommand,
		CommandInitializationBegin,		// Entries of CommandInitializationBegin and CommandInitializationEnd types should not be recorded into
		CommandInitializationEnd,		// journal those are just internal markers to properly record information on command initialization
		ChangePacket,
		Selection,
		PreviewChanges,
		ApplyChanges,
		OK,
		Cancel,
		FailedSelections,				// Entry of this type is just a container for entries of FailedSelection type
		FailedSelection,				// Entries of this type are expected to be put only as sub-entries of entry of FailedSelections type
		ValidationMassProperties,
		ValidationStructure,			// Entries of this type are just containers for entries of ValidationStructureFeatureInfo and ValidationStructureSketchFeatureInfo types
		ValidationStructureFeatureInfo,			// Entries of this type are expected to be present only as direct or indirect sub-entries of entries of type ValidationStructure
		ValidationStructureSketchFeatureInfo,	// Entries of this type are expected to be present only as direct or indirect sub-entries of entries of type ValidationStructure
		ChangeDataModel,
		ValidationCustom,
		ValidationCustomEvent,
		ValidationCustomEventString,
		InsertPacketParamElement,
		RemovePacketParamElement,
		TimeMarker,
		CSOContent,
		CSOElement,
	};

public:

	SWXUtJournalEntry();
	virtual ~SWXUtJournalEntry();

public:
	/**
	* CreateEntry
	* @return [delete]
	*/
	static SWXUtJournalEntry* CreateEntry( EntryType iType );
	/**
	* CreateEntry
	* @return [delete]
	*/
	static SWXUtJournalEntry* CreateEntry( const CATUnicodeString& iXmlNodeName );

public:

	virtual HRESULT Load( const CATIDOMElement_var& iNode );
	virtual HRESULT Save( CATIDOMDocument_var& ioDoc, CATIDOMElement_var& ioNode );
	virtual bool IsValid() const;
	virtual bool CanBeFixed( const SWXUtJournalEntry* iReference, const SWXUtJournalFixInfo& iFixInfo );
	virtual HRESULT Fix( const SWXUtJournalEntry* iReference, const SWXUtJournalFixInfo& iFixInfo );

	virtual bool operator==( const SWXUtJournalEntry& iOther ) const;

public:

	EntryType GetType() const;
	CATUnicodeString GetXmlNodeName() const;

	bool HasSubEntries() const;
	const SWXUtVector<SWXUtJournalEntry*> GetSubEntries() const;
	void AddSubEntry( SWXUtJournalEntry* iEntry );

protected:

	void DeleteSubEntries();

private:

	SWXUtJournalEntry( SWXUtJournalEntry& );
	SWXUtJournalEntry& operator=( SWXUtJournalEntry& );

protected:

	SWXUtVector<SWXUtJournalEntry*> mSubEntries;

private:

	EntryType mType;
};

//-----------------------------------------------------------------------

#endif
