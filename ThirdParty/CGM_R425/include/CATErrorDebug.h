#ifndef CATErrorDebug_H
#define CATErrorDebug_H

#include "CATIAV5Level.h"
#include "CATError.h"
class CATUnicodeString;

#define CATError_SetNLSXXX_Sig_v2   // Added const
typedef void (CATError::*PFuncCATErrorSetNLSXXXParams)(int iNumNLSParam, CATUnicodeString const * iUS1, ...);


#include "DSYSysTraceSystemMigration.h"

#ifdef DSY_SYS_TRACE_SYSTEM_MIGRATION
/************************************************************************/
/* Defines                                                              */
/************************************************************************/

/************************************************************************/
/* Global includes                                                      */
/************************************************************************/

/************************************************************************/
/* Local includes                                                       */
/************************************************************************/

/************************************************************************/
/* Functions declaration                                                */
/************************************************************************/

//=======================================================================
//==[ CATError.cpp ]=====================================================
//=======================================================================
extern int* _CATErrorDebugOn;
//=======================================================================

//=======================================================================
//==[ CATError.cpp ]=====================================================
//=======================================================================
extern int _CATErrorDebugDesc;
//=======================================================================

//=======================================================================
// Trace object for "CATErrorDebug" log.
//=======================================================================
static DSYSysTrace* s_pCATErrorDebugTrace = NULL;
//=======================================================================

/************************************************************************/
/************************************************************************/

//=======================================================================
//==[ CATError.cpp ]=====================================================
//=======================================================================
extern int* _CATErrorTraceOn;
//=======================================================================

//=======================================================================
//==[ CATError.cpp ]=====================================================
//=======================================================================
extern int _CATErrorTraceDesc;
//=======================================================================

//=======================================================================
// Trace object for "CATErrorTrace" log.
//=======================================================================
static DSYSysTrace* s_pCATErrorTraceTrace = NULL;
//=======================================================================

/************************************************************************/
/************************************************************************/

//=======================================================================
//==[ CATError.cpp ]=====================================================
//=======================================================================
extern int* DebuggerCallDebugMode;
//=======================================================================

//=======================================================================
//==[ CATError.cpp ]=====================================================
//=======================================================================
extern int DebuggerCallDebugModeDesc;
//=======================================================================

//=======================================================================
// Trace object for "CheckPtDebug" log.
//=======================================================================
static DSYSysTrace* s_pCheckPtDebugTrace = NULL;
//=======================================================================

/************************************************************************/
/************************************************************************/

//=======================================================================
//==[ CATError.cpp ]=====================================================
//=======================================================================
extern int* SessionTimedStatsDebugOn;
//=======================================================================

//=======================================================================
//==[ CATError.cpp ]=====================================================
//=======================================================================
extern int SessionTimedStatsDesc;
//=======================================================================

//=======================================================================
// Trace object for "SessionStats" log.
//=======================================================================
static DSYSysTrace* s_pSessionStatsTrace = NULL;
//=======================================================================

/************************************************************************/
/************************************************************************/

//=======================================================================
inline void __TRAOPEN(void)
//=======================================================================
{
  if ( s_pCATErrorDebugTrace == NULL )
  {
    s_pCATErrorDebugTrace = new DSYSysTrace(ERROR_DEBUG_STRG);
    if ( s_pCATErrorDebugTrace != NULL )
    {
      _CATErrorDebugDesc = ERROR_DEBUG_FLAG;
      _CATErrorDebugOn = (int *)s_pCATErrorDebugTrace;
    }
  }

  if ( s_pCATErrorTraceTrace == NULL )
  {
    s_pCATErrorTraceTrace = new DSYSysTrace(ERROR_TRACE_STRG);
    if ( s_pCATErrorTraceTrace != NULL )
    {
      _CATErrorTraceDesc = ERROR_TRACE_FLAG;
      _CATErrorTraceOn = (int *)s_pCATErrorTraceTrace;
    }
  }

  if ( s_pCheckPtDebugTrace == NULL )
  {
    s_pCheckPtDebugTrace = new DSYSysTrace(CHKPT_DEBUG_STRG);
    if ( s_pCheckPtDebugTrace != NULL )
    {
      DebuggerCallDebugModeDesc = CHKPT_DEBUG_FLAG;
      DebuggerCallDebugMode = (int *)s_pCheckPtDebugTrace;
    }
  }

  if ( s_pSessionStatsTrace == NULL )
  {
    s_pSessionStatsTrace = new DSYSysTrace(SESSI_DEBUG_STRG);
    if ( s_pSessionStatsTrace != NULL )
    {
      SessionTimedStatsDesc = SESSI_DEBUG_FLAG;
      SessionTimedStatsDebugOn = (int *)s_pSessionStatsTrace;
    }
  }
}

//=======================================================================
inline DSYSysTrace* __TRAPRINT(int iFileDescriptor)
//=======================================================================
{
  register DSYSysTrace* l_pTrace = NULL;

  switch( iFileDescriptor )
  {
  case ERROR_DEBUG_FLAG:
    {
      l_pTrace = s_pCATErrorDebugTrace;
    }
    break;
  case ERROR_TRACE_FLAG:
    {
      l_pTrace = s_pCATErrorTraceTrace;
    }
    break;
  case CHKPT_DEBUG_FLAG:
    {
      l_pTrace = s_pCheckPtDebugTrace;
    }
    break;
  case SESSI_DEBUG_FLAG:
    {
      l_pTrace = s_pSessionStatsTrace;
    }
    break;
  default:
    { }
  }

  // Done.
  return l_pTrace;
}
#else // DSY_SYS_TRACE_SYSTEM_MIGRATION
# include "CATTraMacro.h"
#endif  // DSY_SYS_TRACE_SYSTEM_MIGRATION
#endif  // CATErrorDebug_H
