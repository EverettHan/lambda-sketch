//===================================================================
// COPYRIGHT DASSAULT SYSTEMES 2011/11/02
//===================================================================
// CATEFrmEditorCtxMenu.cpp
// Header definition of class CATEFrmEditorCtxMenu
//===================================================================
//
// Usage notes:
//
//===================================================================
//  2011/11/02 Creation: Code generated by the 3DS wizard
//===================================================================

#ifndef CATEFrmEditorCtxMenu_H
#define CATEFrmEditorCtxMenu_H

#include "CATIFrmEditorCtxMenu.h"
#include "CATAfrFoundation.h"
#include "CATString.h"

class CATCmdAccess;
class CATCmdWorkshop;

//-----------------------------------------------------------------------

class ExportedByCATAfrFoundation CATEFrmEditorCtxMenu: public CATIFrmEditorCtxMenu
{
  public:

    CATDeclareClass;

    // Standard constructors and destructors
    CATEFrmEditorCtxMenu ();
    virtual ~CATEFrmEditorCtxMenu ();


    // interface implementation
    // =========================

    // Returns the access chain to add to the contextual menu.
    // Algorithm:
    //  - Command headers: Read the xml and build the CATCommanHeader instances only once per workshop.
    //  - Command Access:  Read the xml and build the CATCmdAccess chain only once; next times only return the data member.
    // in case of other needs overwrite this method; use protected methods as tools.
    virtual CATCmdAccess * GetEditorContextualMenu();

    // Sets the name for the Ctx Menu declarative file.
    // The default name is the type of editor (IsA()) + 'EditorCtxMenu.xml'
    // The input string here will replace IsA().
    void SetEditorContextualName (const CATString & iEditorName);

    // Asks the editor if it allows a command header to be displayed in the contextual menu.
    // This method is asked for all items of the contextual menu except the ones that are added by the window:
    // Show/No Show, Properties, Other Selections, Center Tree.
    // This default implementation always return TRUE.
    CATBoolean AllowCommandHeaderInCtxMenu (const CATString & iHeaderId);


  protected:

    // Returns the name of the xml file
    CATString & GetEditorContextualName ();
    // Reads CATCmdHeadersList template in xml file
    void LoadCommandHeadersFromFile (); 
    // Reads CATCmdAccessChain template in xml file
    CATCmdAccess * LoadAccessChainFromFile (); 


  private:

    // Copy constructor and equal operator
    CATEFrmEditorCtxMenu (CATEFrmEditorCtxMenu &);
    CATEFrmEditorCtxMenu& operator=(CATEFrmEditorCtxMenu&);

    CATString _CtxMenuName;
    CATCmdAccess * _pAccessChain;
    CATCmdWorkshop * _pWorkshop;
};

//-----------------------------------------------------------------------

#endif
