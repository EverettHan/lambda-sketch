// COPYRIGHT DASSAULT SYSTEMES 2017, ALL RIGHTS RESERVED.
//=============================================================================
//
// RESPONSIBLE  : RR
//
// DESCRIPTION  : Operator dedicated to fillet BiW parts 
//
//=============================================================================
// Creation RR April 2017
//=============================================================================
#ifndef CATAutoFilletBiW_H
#define CATAutoFilletBiW_H

#include "CATTopOperator.h" 
#include "ExportedByFIL.h"
#include "CATTopDef.h"
#include "ListPOfCATAutoFilletBiWDiagnosis.h"
#include "ListPOfCATAutoFilletBiWFeature.h"
#include "ListPOfCATEdge.h"
#include "CATLISTV_CATMathPoint.h"
#include "CATCGMNewArray.h"
#include "CATAutoFilletBiW_Defines.h"
class CATAutoFilletBiW;
class CATAutoFilletBiWImpl;
class CATSoftwareConfiguration;
class CATUnicodeString;

//----------------------------------------------------------------------------
// Public section
//----------------------------------------------------------------------------
 /** 
	* Creates a CATAutoFilletBiW operator.
	* @param iFactory
  * Factory in which objects may be created.
	* @param iTopData
  * CATTopData to manage upward compatibility of changes in the implementation.
	* @param iBody
	* Input Body to be filleted. 
	* @param iConvexFirst
  * Convex Fillets will be ceated before concave ones.
  */
ExportedByFIL CATAutoFilletBiW* CATCreateAutoFilletBiW(CATGeoFactory& iFactory, CATTopData& iTopData, CATBody& iBody, const CATBoolean iConvexFirst);

class CATAutoFilletBiW: public CATTopOperator 
{
  CATCGMVirtualDeclareClass(CATAutoFilletBiW);
public:
  ~CATAutoFilletBiW();

 /** 
	* Add a new specification to this operator.
	* @param iEdges
  * The specification applies to iEdges.
	* @param iLocation
  * 3D location of the specification.
	* @param iRadius
	* Specified fillet radius. 
	* @param iSpecType
	* Type of the specification. 
	* @param iConvexityIfNotMeasurable
	* Assign convexity in case of it is not measurable (may be UnknownConvexity if convexity is measurable). 
	* @param iIndexForOrdering
	* Order to be respected among same type. 
	* @param iName
	* Specification user name. 
  * <br>returns S_OK if the specification has been succeessfully assigned to this.
  */
  ExportedByFIL HRESULT AddSpec(const ListPOfCATEdge& iEdges, const CATMathPoint& iLocation, const double iRadius, const CATAutoFilletBiW_SpecType iSpecType, const CATLONG32 iIndexForOrdering, const CATUnicodeString& iName);

 /** 
	* Analyze all specifications.
	* @param oDiagnosis
  * Diagnosis generated by the analysis. The diagnosis remain owned by this.
  * <br>returns S_OK if the analysis is successful so that creation of fillets may be launched.
  */
  ExportedByFIL HRESULT GetDiagnosis(ListPOfCATAutoFilletBiWDiagnosis& oDiagnosis) const; 

 /** 
	* Get list of features.
	* @param oFeatures
  * List of Fillet Features to be created. The list items will be deleted when this operator is deleted.
  * <br>returns S_OK if fillet features has to be created.
  */
  ExportedByFIL HRESULT GetFeatures(ListPOfCATAutoFilletBiWFeature& oFeatures) const;

  //----------------------------------------------------------------------------
  // Private section - Do not use
  //----------------------------------------------------------------------------
  CATAutoFilletBiW(CATGeoFactory& iFactory, CATTopData& iTopData, CATAutoFilletBiWImpl* iImpl);
  static const CATString* GetDefaultOperatorId();
  CATCGMNewClassArrayDeclare; // Pool allocation
private:
  int RunOperator(); // for CGMReplay
};

//----------------------------------------------------------------------------

#endif
