#ifndef CATKweGraphUpdateIntegrationFunction_H
#define CATKweGraphUpdateIntegrationFunction_H

#include "CATLifSpecs.h"
#include "CATBooleanDef.h"
class CATBaseUnknown_var;

// This function must be called as the first instruction in Update method for features that are published 
// by xGD/Visual Scripting 
// It allows to manage update of the feature from outputs (update called by a feature that references it)
// The idea:
// - the feature is generated by the graph. Its update is usually triggered during graph execution
// - if a graph input is modified which impacts the feature, depending on the update order, 
// the graph may not be updated first and the feature update may be trigered by another feature that references it in input
// so in that case, the feature must update the graph and return. The graph update will then trigger the feature update when associated node will be evaluated
// 
// So this function looks if the feature is a graph result, retrieves the graph then checks if the graph update is running. If not, it triggers the graph update 
// (actually the generic feature update (mechanical modeler feature that encapsulates the graph)) and returns.
// If those conditions are not met, usual update is performed
//
// IF THE FUNCTION RETURNS CATTrue, UPDATE CODE SHOULD IMMEDIATELY EXIT


extern "C" ExportedByCATLifSpecs CATBoolean CATKweGraphUpdateIntegrationFunction(const CATBaseUnknown_var & iObjectBeingUpdated);


#endif
