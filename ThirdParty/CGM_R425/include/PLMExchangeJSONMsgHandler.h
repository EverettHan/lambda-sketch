//===================================================================
// COPYRIGHT Dassault Systemes 2016/10/04
//===================================================================
// PLMExchangeJSONMsgHandler.cpp
// Header definition of class PLMExchangeJSONMsgHandler
//===================================================================
//
// Usage notes:
//
//===================================================================
//  2016/10/04 Creation: Code generated by the 3DS wizard
//===================================================================

#ifndef PLMExchangeJSONMsgHandler_H
#define PLMExchangeJSONMsgHandler_H

#include "PLMExchangeWebServices.h"
#include "CATUnicodeString.h"
#include "CATListOfCATUnicodeString.h"
#include "CATOmxAny.h"
#include "CATOmxArray.h"

// --- ObjectModelerCollection to support JSON parser infrastructure
#include "CATOmxJson.h"
#include "CATOmxUTF8String.h"
#include "CATOmxKeyString.h"
#include "CATOmxTextStream.h"

//-----------------------------------------------------------------------

class ExportedByPLMExchangeWebServices PLMExchangeJSONMsgHandler
{
public:
   // Standard constructors and destructors
   // -------------------------------------
   PLMExchangeJSONMsgHandler ();
   virtual ~PLMExchangeJSONMsgHandler ();

   // Create a JSON request Message 
   virtual HRESULT CreateRequestMessage(CATUnicodeString &oRequestMessage) = 0; 

   // Create Request headers as content type, cache control and so on... 
   virtual HRESULT CreateRequestHeaders(CATListOfCATUnicodeString& oRequestHeaders); 

   // Parse the response message and get the set of records retrieved in the JSON response 
   virtual HRESULT ParseResponseMessage(const CATUnicodeString & iResponseMessage, CATOmxArray<CATOmxAny>*& oRecordReadSet) = 0;  

   static void InitMap(CATOmxAny& ioMap);
   static void InitList(CATOmxAny& ioList);
   static void AppendToMap(CATOmxAny &ioMap, const CATUnicodeString &iKey, CATOmxAny &iValue);
   static void AppendToMap(CATOmxAny &ioMap, const CATUnicodeString &iKey, const CATUnicodeString &iValue);
   static void AppendToList(CATOmxAny &ioList, CATOmxAny &iValue);
   static void AppendToList(CATOmxAny &ioList, int iValue);

   static bool IsMap(const CATOmxAny& iAny);
   static bool IsList(const CATOmxAny& iAny);
   static CATOmxAny GetFromMap(const CATOmxAny& iAny, const CATUnicodeString& iKey);
   static int GetMapSize(const CATOmxAny& iAny);
   static int GetListSize(const CATOmxAny& iAny);
   static CATOmxAny GetFromList(const CATOmxAny& iAny, const int iIndex );

   static CATOmxAny Parse(const CATOmxUTF8String &iStr);
   static CATOmxUTF8String Serialize(const CATOmxAny& iAny);

private:
   // Copy constructor and equal operator
   // -----------------------------------
   PLMExchangeJSONMsgHandler (PLMExchangeJSONMsgHandler &);
   PLMExchangeJSONMsgHandler& operator=(PLMExchangeJSONMsgHandler&);

};

//-----------------------------------------------------------------------

#endif
