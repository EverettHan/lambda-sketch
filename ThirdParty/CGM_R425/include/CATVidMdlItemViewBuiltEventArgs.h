//===================================================================
// COPYRIGHT DASSAULT SYSTEMES 2012/03/16
//===================================================================
// CATVidMdlItemViewBuiltEventArgs.h
// Header definition of class CATVidMdlItemViewBuiltEventArgs
//===================================================================
//
// Usage notes:
//
//===================================================================
//  2012/03/16 Creation: Code generated by the 3DS wizard  VV6
//===================================================================

#ifndef CATVidMdlItemViewBuiltEventArgs_H
#define CATVidMdlItemViewBuiltEventArgs_H

#include <VisuDialog.h>
#include <CATBaseUnknown.h>
#include <CATSYPEventArgs.h>
#include <CATUnicodeString.h>
#include <CATISYPIntrospectable.h>
#include <CATVidMdlIndex.h>

class CATSYPEvent;
class CATSYPTemplateData;
class CATSYPObjectConnector;

/**
 * Argument class dispatched by an items/view class to indicate that it
 * has built a view for a displayed item.
 *
 * Listening to this event allows you to be warned that a view has been
 * built for a displayed item. You can then recover syp:named object of the view, set some properties, and even connect properties to the build view
 * by using the connector.
 * @see CATSYPObjectConnector
 */
class ExportedByVisuDialog CATVidMdlItemViewBuiltEventArgs : public CATSYPEventArgs
{
  CATDeclareClass;
public:
  /** Default constructor */
  CATVidMdlItemViewBuiltEventArgs (
    CATSYPEvent * i_pEvent, 
    const CATVidMdlIndex & i_index, 
    const CATString& i_columnId,
    CATISYPIntrospectable_var i_spDataItem, 
    CATBaseUnknown_var i_spView, 
    CATSYPTemplateData * i_pData, 
    CATSYPObjectConnector* i_pCustomObjectConnector);
  /** @return a syp:named object defined on the build view
  * Assert if no sypnamed object is found in view template.
  */
  CATBaseUnknown * RetrieveSypNamedObject(const CATUnicodeString& i_sypName);

  /** @return a syp:named object defined on the build view
  * No assertion occured if no sypnamed object is found in view template.
  */
  CATBaseUnknown * TryRetrieveSypNamedObject(const CATUnicodeString& i_sypName);
  /** 
   * Sets a custom object connector, used to easily bind and unbind properties and event handler to the built view.
   *  @param i_pCustomObjectConnector the connector to set. Must be released by the caller after setting it.
   */
  void SetCustomObjectConnector(CATSYPObjectConnector* i_pCustomObjectConnector);
  /** @return the introspectable used to define a row of the model.*/
  INLINE const CATISYPIntrospectable_var& GetIntrospectableDataItem() const{return _spIntroDataItem;}
  /** @return the view of the cell that has been build.*/
  INLINE const CATBaseUnknown_var& GetBuiltView() const{return _spView;}
  /** @return a custom object connector, used to easily bind and unbind properties and event handler to the built view. */
  INLINE CATSYPObjectConnector* GetCustomObjectConnector()const {return _pCustomObjectConnector;}
  /** */
  /** @return the identifier of the column of the cell that will be build.*/
  INLINE const CATString& GetColumnId()const{return _columnId;}
  /** @return the model index of the row of the cell being constructed.*/
  INLINE const CATVidMdlIndex& GetModelIndex()const {return _index;}
protected:
  /** Destructor */
  virtual ~CATVidMdlItemViewBuiltEventArgs ();
private:
  // Copy constructor and assignement operator are disabled
  CATVidMdlItemViewBuiltEventArgs (CATVidMdlItemViewBuiltEventArgs &);
  CATVidMdlItemViewBuiltEventArgs& operator=(CATVidMdlItemViewBuiltEventArgs&);
  CATISYPIntrospectable_var _spIntroDataItem;
  CATBaseUnknown_var _spView;
  CATSYPTemplateData * _pTemplateData;
  CATSYPObjectConnector* _pCustomObjectConnector;
  CATVidMdlIndex _index;
  CATString _columnId;
};

#endif
