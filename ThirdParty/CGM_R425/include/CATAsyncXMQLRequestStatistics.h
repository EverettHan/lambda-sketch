//===================================================================
// COPYRIGHT Dassault Systemes 2017/11/16
//===================================================================
// CATAsyncXMQLRequestStatistics.cpp
// Header definition of class CATAsyncXMQLRequestStatistics
//===================================================================
//
// Usage notes:
//
//===================================================================
//  2017/11/16 Creation: Code generated by the 3DS wizard
//===================================================================

#ifndef CATAsyncXMQLRequestStatistics_H
#define CATAsyncXMQLRequestStatistics_H

#include "CATPLMxMQL.h"
#include "CATAsyncStatistics.h"
#include "CATA5ParserStatistics.h"
#include "CATAsyncTaskStatistics.h"
#include "CATAsyncSysHttpStatistics.h"
#include "CATOmxSR.h"
#include "CATAsyncXMQLTypes.h"
#include "CATOmxCxxPortability.h"

class ExportedByCATPLMxMQL CATAsyncXMQLRequestStatistics : public CATAsyncStatistics
{
public:
  CATAsyncXMQLRequestStatistics();
  virtual ~CATAsyncXMQLRequestStatistics();

  virtual CATUnicodeString GetName() const OMX_Cxx11_OVERRIDE;
  virtual HRESULT GetJson(CATOmxJsonObject& oStatistics) OMX_Cxx11_OVERRIDE;

  virtual HRESULT AddStatistics(CATAsyncStatistics& iStatistics) OMX_Cxx11_OVERRIDE;

  /*
  * Returned CATA5ParserStatistics ptr is not addrefed
  */
  CATA5ParserStatistics* GetParserStatistics();

  /*
  * Returned CATAsyncTaskStatistics ptr is not addrefed
  */
  CATAsyncTaskStatistics* GetTaskStatistics();

  /*
  * Returned CATAsyncSysHttpStatistics ptr is not addrefed
  */
  CATAsyncSysHttpStatistics* GetSysHttpStatistics();

  void NotifyRequestGenerationFinished();
  void SetRequestExecutionId(CATUnicodeString& iRequestExecutionId);
  void SetxMQLRequestType(xMQLRequest::EType iType);
  void SetxMQLRequestMode(xMQLRequest::EMode iMode);
  void SetxMQLRequestSearchMode(xMQLRequest::ESearchMode iSearchMode);
  void SetInputObjectCount(CATLONG64 iCount);

private:
  CATUnicodeString _GetxMQLRequestType();

  CATUnicodeString _RequestExecutionId;
  xMQLRequest::EType _xMQLRequestType;
  xMQLRequest::EMode _xMQLRequestMode;
  xMQLRequest::ESearchMode _xMQLRequestSearchMode;
  CATLONG64 _RequestGenerationFinishedMs;
  CATLONG64 _InputObjectCount;

  CATOmxSR<CATAsyncTaskStatistics> _spTaskStatistics;
  CATOmxSR<CATA5ParserStatistics> _spParserStatistics;
  CATOmxSR<CATAsyncSysHttpStatistics> _spSysHttpStatistics;
};

#endif
