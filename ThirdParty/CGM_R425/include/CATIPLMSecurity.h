// COPYRIGHT Dassault Systemes 2006
//===================================================================
//
// CATIPLMSecurity.h
// Define the CATIPLMSecurity interface
//
//===================================================================
//
// Usage notes:
//   New interface: describe its use here
//
//===================================================================
//
//  Sep 2006  Creation: Code generated by the CAA wizard  jvm
//===================================================================
/**
* @level Protected
* @usage U3
*/
#ifndef CATIPLMSecurity_H
#define CATIPLMSecurity_H

#include "CATPLMServicesItf.h"
#include "CATBaseUnknown.h"

#ifndef LOCAL_DEFINITION_FOR_IID
extern ExportedByCATPLMServicesItf IID IID_CATIPLMSecurity;
#else
extern "C" const IID IID_CATIPLMSecurity ;
#endif

class CATString;
class CATPLMTypeId;
#define CATIPLMSecurity2_Exist

/**
 * PLM Provider Security interface.
 * <b>Role</b>: This interface provides run-time security services to
 * PLM components that need to secure their data.
 */
class ExportedByCATPLMServicesItf CATIPLMSecurity: public CATBaseUnknown
{
  CATDeclareInterface;

  public:

    /**
     * Returns the security information. 
     * Some of Those security parameters could be different from connection parameters.
     * 
     * @param oUserId
     * PLM User Identifier. (Connected User)
     * @param oOrganisationId
     * PLM Organization Identifier.
     * @param oProjectId
     * PLM Project Identifier.
     * @param oRoleId
     * PLM Role Identifier.
     * @return
     * Method execution status.
     * Possible values are:
     * S_OK    successful.
     * E_FAIL  when an error occurs.
     */
    virtual HRESULT GetSecurityParameters(CATString & oUserId
      , CATString & oOrganisationId
      , CATString & oProjectId
      , CATString & oRoleId) = 0;

    /**
     * Checks the security access to a global Command.
     * <br><b>Role</b>: This method computes the access to the specified global
     * command (e.g. <code>Tree sort</code>), thus indicating if that function
     * should be made available to the connected user by the relevant modeler(s).
     * 
     * @param iCommandId
     * PLM global function name.
     * @return
     * Method execution status.
     * Possible values are:
     * S_OK    if the access to the function is granted;
     * S_FALSE if the access to the function is denied;
     * E_FAIL  when an error occurs while valuating the security access.
     */
    virtual HRESULT CheckAccess(const CATString & iCommandId) = 0;

    /**
     * Checks the security access to an entity Command.
     * <br><b>Role</b>: This method computes the access to the specified
     * function (e.g. <code>Delete</code>) of the specified PLM Type (e.g.
     * <code>RscPerson</code>), thus indicating if that Command should
     * be made available to the connected user by the relevant modeler(s).
     * 
     * @param iTypeId
     * PLM Type Identifier.
     * @param iFunction
     * PLM entity function name.
     * @return
     * Method execution status.
     * Possible values are:
     * S_OK    if the access to the function is granted;
     * S_FALSE if the access to the function is denied;
     * E_FAIL when an error occurs while valuating the security access.
     */
    virtual HRESULT CheckAccess(const CATPLMTypeId & iTypeId, const CATString & iCommandId) = 0;
};

#endif
