//===================================================================
// CATV3DMainRobotManipulationCommand.cpp
// Header definition of class CATV3DMainRobotManipulationCommand
//===================================================================
//
// Usage notes:
//
//===================================================================
//  2013/04/10 Creation: Code generated by the 3DS wizard
//===================================================================

#ifndef CATV3DMainRobotManipulationCommand_H
#define CATV3DMainRobotManipulationCommand_H

#include "VisuImmersive3D.h"
#include "CATCommand.h"

class CATV3DCtlRobot;
class CATLISTP(CATBaseUnknown);
class CATViewpoint;
class CATSYPEventArgs;
class CATSYPEventHandler;

//-----------------------------------------------------------------------

struct CATV3DMainRobotIdentifierAssoc
{
  CATINT32 _Identifier;
  CATV3DCtlRobot * _pV3DCtlRobot;
  CATLISTP(CATBaseUnknown) * _pListCommands; 
  CATLISTP(CATBaseUnknown) * _pListPluggedCommands; 
};

class ExportedByVisuImmersive3D CATV3DMainRobotManipulationCommand: public CATCommand
{
  CATDeclareClass;

public:
  CATV3DMainRobotManipulationCommand(CATCommand * iParent=NULL, CATString * const iIdentifier=NULL);
  CATV3DMainRobotManipulationCommand(CATCommand * iParent, CATCommandMode iStartMode);
  CATV3DMainRobotManipulationCommand(CATCommand * iParent, const CATString & iIdentifier);
  CATV3DMainRobotManipulationCommand(CATCommand & iParent);
  CATV3DMainRobotManipulationCommand(const CATString & iIdentifier, CATCommandMode iStartMode);
  ~CATV3DMainRobotManipulationCommand();

  virtual void RequestDelayedDestruction();

  void Plug();
  void UnPlug();

  void AppendToList(const CATBaseUnknown * ipIdentifier);
  void RemoveFromList();

  CATV3DCtlRobot * CreateOrGetMainV3DRobot(CATViewpoint* i_pViewpoint = NULL);
  CATV3DCtlRobot * GetMainV3DRobot();
  CATV3DCtlRobot * GetAssociatedV3DRobot();

protected:

  virtual void InterpretSYPEvent(CATBaseUnknown * i_pSender, CATSYPEventArgs * i_pArgs) = 0;
  virtual CATBoolean ManageInGhostMode() = 0;

private:

  CATV3DMainRobotIdentifierAssoc * GetStruct(const CATBaseUnknown * ipIdentifier = NULL);

  void InterpretRobotEvent(CATBaseUnknown * i_pSender, CATSYPEventArgs * i_pArgs);
    
  void PutEvents();
  void RemoveEvents();

  // Copy constructor and equal operator
  // -----------------------------------
  CATV3DMainRobotManipulationCommand (CATV3DMainRobotManipulationCommand &);
  CATV3DMainRobotManipulationCommand& operator=(CATV3DMainRobotManipulationCommand&);


  /*static CATBaseUnknown ** _pListIdentifiers;
  static CATV3DCtlRobot ** _pListCtlRobots;
  static CATLISTP(CATBaseUnknown) ** _pListListCommands; */
  static CATRawCollPV * _pListAssoc;

  CATINT32 _Identifier;
  CATSYPEventHandler ** _EventHandlers;
};

//-----------------------------------------------------------------------

#endif
