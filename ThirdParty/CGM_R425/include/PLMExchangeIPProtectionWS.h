//===================================================================
// COPYRIGHT Dassault Systemes 2019/05/09
//===================================================================
// PLMExchangeIPProtectionWS.cpp
// Header definition of class PLMExchangeIPProtectionWS
//===================================================================
//
// Usage notes:
//
//===================================================================
//   2021/02/05 Creation: Code generated by the 3DS wizard
//===================================================================

#ifndef PLMExchangeIPProtectionWS_H
#define PLMExchangeIPProtectionWS_H

#include "PLMExchangeWebServices.h"
#include "CATBoolean.h"
#include "CATUnicodeString.h"
#include "CATListOfCATUnicodeString.h"
#include "CATOmxOHMap.h"

//-----------------------------------------------------------------------

class ExportedByPLMExchangeWebServices PLMExchangeIPProtectionWS
{
public:
	// Standard constructors and destructors
	// -------------------------------------
	PLMExchangeIPProtectionWS();
	virtual ~PLMExchangeIPProtectionWS();

	enum WebServiceContext
	{
		WebServiceContextUnknown = 0,
		WebServiceContextImport,
		WebServiceContextExport
	};	

	HRESULT InitializeQuery(const WebServiceContext & iContextOperation);
	HRESULT InitializeIsAuthorizedQuery(const WebServiceContext & iContextOperation);

private:
	// Copy constructor and equal operator
	// -----------------------------------
	PLMExchangeIPProtectionWS(PLMExchangeIPProtectionWS &);
	PLMExchangeIPProtectionWS& operator=(PLMExchangeIPProtectionWS&);

public: 
	/**
	* Method to get if current provider is real server (PLMxT and TST Provider doesn't have URLs)
	* @param CATBoolean oIsValid
	* the boolean value specifiying validity of the server
	* @return
	* <dl>
	* <dt><code>S_OK</code> if everything ran ok, otherwise...
	* <dt><code>E_FAIL</code> <dd>
	* </dl>
	*/
	static HRESULT IsValidServer(CATBoolean & oIsValid);


	/**
	* Method to get Class and Classified Item Relation IDs corresponing to given input classified objects
	* This web service will be called at export
	* The result of the Web service call is a JSON file that will be processed for required information.
	* @return
	* <dl>
	* <dt><code>S_OK</code> if everything ran ok, otherwise...
	* <dt><code>E_FAIL</code> <dd>
	* </dl>
	*/
	HRESULT ExportFetchIPProtectionClassesWS(const CATListOfCATUnicodeString & ListOfClassifiedObjectsPhysicalID,
		const WebServiceContext & iContextOperation,
		CATOmxOHMap<CATUnicodeString, CATListOfCATUnicodeString> * oObjectInfoMap);    
	
	/**
	* Method to check if user is Authorized to export IP Protected data.
	* This web service will be called at export.
	* The result of the Web service call is to know if user is authorized or not.
	* @return
	* <dl>
	* <dt><code>S_OK</code> if everything ran ok, otherwise...
	* <dt><code>E_FAIL</code> <dd>
	* </dl>
	*/
	
	HRESULT IsUserAuthorizedToExportIPProtectedData(CATBoolean & obIsUserAuthorizedToExportIPProtection, CATBoolean & obIPProtectionAppInstalled);


private:

	CATUnicodeString            _JSONGetAttributeResponseFilePath;
	CATUnicodeString            _ServerURL;
	CATUnicodeString            _FullWebServicePath;
	CATUnicodeString            _SecurityRole;
	CATListOfCATUnicodeString   _usListOfIPProtectionClasses;
};

//-----------------------------------------------------------------------

#endif
