//===================================================================

//===================================================================
// CATDE2DialogAgent.cpp
// Header definition of class CATDE2DialogAgent
//===================================================================
//
// Usage notes:
//
//===================================================================
//  2013-02-07 Creation by Q62: Code generated by the 3DS wizard
//===================================================================

#ifndef CATDE2DialogAgent_H
#define CATDE2DialogAgent_H

#include "CATDialogEngine.h"
#include "CATDE2SYPCollection.h"
#include "CATUnicodeString.h"
#include "CATDlgEngUtility.h"
#include "CATDE2Utilities.h"

//For the introspectable bitfields
#include "CATSYPDeclareBitField.h"
#include "CATSYPDeclareBitFieldBoxing.h"
#include "CATSYPDeclareBitFieldFactory.h"

class CATISYPCollection;

#define DEFAULT_DE2_AGENT_ID "Please Set the Nls Id as the Id of your Agent"

#define DialogAgentDefaultBehavior CATDlgEngOneShot|CATDlgEngActive|CATDlgEngWithUndoStep|CATDlgEngReceiveAllNotifications|CATDlgEngWithoutVisualization|CATDlgEngIgnoreOnPrevaluate

//-----------------------------------------------------------------------



class ExportedByCATDialogEngine CATDE2DialogAgent: public CATDE2SYPCollection
{
  CATDeclareClass;

  CATSYP_DECLARE_ULONG64_BITFIELD(ExportedByCATDialogEngine, DE2Behaviors)
    
  public:
    
    // Standard constructors and destructors
    // ------------------------------------- 
    /**
    * A DialogAgent to listen to events in your state command
    */
    CATDE2DialogAgent ();
    virtual ~CATDE2DialogAgent ();

    // Getters & Setters
    // -------------------------------------
    /**
    * Sets the command mode (CATDE2CommandModeExclusive or CATDE2CommandModeShared).
    *@param iCommandMode the command mode 
    */
    void									              SetCommandMode(const CATDE2Utilities::CATDE2CommandMode iCommandMode);
    CATDE2Utilities::CATDE2CommandMode	GetCommandMode()const;

    /**
    * Sets if the agent listens to the CSO (i.e. the commands can use elements put into the CSO before its execution).
    *@param iAddCSOClient an integer to specify if the agent listen to the CSO or not
    */
    void									              SetAddCSOClient(const int iAddCSOClient);
    int										              GetAddCSOClient()const;

    /**
    * Sets the agent in auto reset mode or not, in this mode InitializeAcquisition is called automatically on the agent after the transition it triggered.
    *@param iAutoReset an integer to specify if the agent is in auto reset mode or not
    */
    void									              SetAutoReset(const int iAutoReset);
    int										              GetAutoReset()const;
    
    /**
    * Sets the agent behavior (<a href="http://wikitechno/wiki/index.php/Behaviors_for_Dialog_Agents">See Behaviors Documentation</a>).
    *@param iBehavior a single or a combination of DE2Behaviors 
    */
    void									              SetBehavior(const DE2Behaviors& iBehavior);
    const DE2Behaviors&						      GetBehavior()const;
    
    /**
    * Sets the agent customization class (for your specific clasess of agent, <a href="http://wikitechno/wiki/index.php/Custom_Dialog_Agent:_How_to_create_and_use_them_with_DE%C2%B2">See the documentation</a>).
    *@param iCusto the name of your agent class you created
    */
    void									              SetCustomization(const CATUnicodeString iCusto);
    CATUnicodeString						        GetCustomization() const;
    
    /**
    * Sets the agent customization dll (for your specific classes of agent, <a href="http://wikitechno/wiki/index.php/Custom_Dialog_Agent:_How_to_create_and_use_them_with_DE%C2%B2">See the documentation</a>).
    *@param iCustoDll the name of the dll where your agent class is defined
    */
    void									              SetCustomizationDll(const CATUnicodeString iCustoDll);
    CATUnicodeString						        GetCustomizationDll() const;
    
    virtual CATUnicodeString            ToString(CATBoolean iOnlyProperties = FALSE, 
                                                 CATUnicodeString iCurrentInden ="\n", 
                                                 CATBoolean iBehaviorAlreadySet = FALSE,
                                                 CATBoolean iDumpAgentId = TRUE);
    virtual CATUnicodeString            ChildrenToString(CATUnicodeString iCurrentInden);

  protected:

    DE2Behaviors _Behavior;

  private:
    // Copy constructor and equal operator
    // -----------------------------------
    CATDE2DialogAgent (CATDE2DialogAgent &);
    CATDE2DialogAgent& operator=(CATDE2DialogAgent&);
    
    CATBoolean							  _AddCSOClient;
    CATBoolean							  _AutoReset;
    CATDE2Utilities::CATDE2CommandMode	_CommandMode;
    CATUnicodeString					_Custo;
    CATUnicodeString					_CustoDll;
};	
CATDeclareHandler(CATDE2DialogAgent, CATBaseUnknown);
//-----------------------------------------------------------------------
CATSYP_DECLARE_ULONG64_BITFIELDBOXING(ExportedByCATDialogEngine, CATDE2DialogAgent, DE2Behaviors)
CATSYP_DECLARE_ULONG64_BITFIELDFACTORY(ExportedByCATDialogEngine, CATDE2DialogAgent, DE2Behaviors)
#endif
 
