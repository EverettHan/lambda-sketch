//===================================================================
// COPYRIGHT Dassault Systemes 2017/09/26
//===================================================================
// CATA5CsvRowDefinition.cpp
// Header definition of class CATA5CsvRowDefinition
//===================================================================
//
// Usage notes:
//
//===================================================================
//  2017/09/26 Creation: Code generated by the 3DS wizard
//===================================================================

#ifndef CATA5CsvRowDefinition_H
#define CATA5CsvRowDefinition_H

#include "CATA5ParserExport.h"
#include "CATOmxSharable.h"
#include "CATOmxArray.h"
#include "CATOmxKeyString.h"
#include "CATOmxTextStream.h"

#include "CATA5CsvFieldDescription.h"

#include "CATIAV5Level.h"

namespace CATA5
{
  class CsvRow;

  class CsvRowDefinition;
  typedef CsvRowDefinition Definition;

  /**
  * Row prototype definition.
  */
  class ExportedByCATA5Parser CsvRowDefinition : public CATOmxSharable
  {
  public:
    CsvRowDefinition();

    virtual ~CsvRowDefinition();

    int Columns() const
    { 
      return csv_columns.Size();
    }

    CsvRow* NewRow();
    void TCLDump(CATOmxTextStream &iStream, CATBoolean iAddSurroundingBracket = FALSE, CATBoolean iAddLineFeed = FALSE) const;
    void Configure();

    /*
    * Finish is called at the end of CsvRow::Finish
    * To perform specific multi thread parsing action during row parsing, inherits the definition and override it
    * Error should be added on row and row.status updated if needed 
    */
    virtual void Finish(CsvRow& iRow) const;

    /*
    * Appends the given row definition to the current one.
    * Attributes tag and nbcopykvb are not modified.
    */
    virtual void AppendDefinition(CsvRowDefinition* ipDefinition);

    /*
    * Returns true if the CsvRowDefinition is empty, it means there is 0 field description.
    */
    bool IsEmpty();

  public:
    // Attributes
    CATOmxKeyString _csv_tagType;
    CATOmxKeyString _csv_tag; // the prototype definition tag
    CATOmxArray<FieldDescription> csv_columns; // column description
    int nbcopykvb; // For kvb init
  };
}

#endif
