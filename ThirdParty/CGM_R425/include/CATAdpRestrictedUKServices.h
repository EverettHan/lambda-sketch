// COPYRIGHT Dassault Systemes 2012
//===================================================================
//
// CATAdpRestrictedUKServices.h
// Header definition of CATAdpRestrictedUKServices
//
//===================================================================
//
// Usage notes:
//
//===================================================================
//
//  January 2012  Creation: Code generated by the CAA wizard  ECN
//===================================================================
/**
 * @level Protected
 * @usage U1  
 */
#ifndef CATAdpRestrictedUKServices_H
#define CATAdpRestrictedUKServices_H

#include "CATPLMIntegrationAccess.h"
#include "IUnknown.h"
#include "CATListOfCATString.h"
#include "CATBoolean.h"


class CATIAdpPLMIdentificator;
class CATBaseUnknown;
class CATUnicodeString;
class CATIAdpErrorMonitor;
class CATAdpUKAttributeSetIter;
class CATAdpComponentInfos;


#define AuthorizedModule                  999
#define CATPLMItgTestIntegrationAccess    AuthorizedModule
#define TSTCATAdpUKServices               AuthorizedModule
#define CATPLMIntegrationAccess           AuthorizedModule
#define PLMBatchVPLMServices              AuthorizedModule
#if _MK_MODNAME_ == AuthorizedModule
#else
	    #error Forbidden access to CATAdpRestrictedUKServices from non-infrastructure module
        @error 
#endif
#undef PLMBatchVPLMServices
#undef CATPLMIntegrationAccess
#undef TSTCATAdpUKServices
#undef CATPLMItgTestIntegrationAccess


//-----------------------------------------------------------------------

/**
* Class to manage access to attributes values on a PLM component in database with attributes identified by a UK Id. 
*
* <br><b>Role</b>: Provide access to query PLM datas though from a component identifer and a UK identifier.
*/
class ExportedByCATPLMIntegrationAccess CATAdpRestrictedUKServices
{

  public:


/** 
 * deprecated. Use API below.
 *
 */
   static HRESULT GetUKAttributesValues(CATIAdpPLMIdentificator * iComponentIdentifier, const CATUnicodeString & iUKId,
                                              CATAdpUKAttributeSetIter & oAttributeSetIter, CATIAdpErrorMonitor * iopErrorMonitor = NULL );


/** 
 * Searches in the Database attributes values which correspond to the given UK Id and component identifier.
 * <br><b>Role</b>: This method enables to search in the connected Database attribute values from the given UK and from the 
 * component identifier.
 * <ul>
 * <li><code>E_FAIL</code> is returned if no or more than one provider is currently connected.</li>
 * </ul>
 *
 * @param iComponentIdentifier [in]
 * The identifier of the object on which user wants to retrieve values.
 * <ul>
 * <li><code>E_INVALIDARG</code> is returned if invalid Component is given.</li>
 * <li><code>E_FAIL</code> is returned if the given Component is not yet supported by this API.</li>
 * </ul>
 * @param iUKId[in]
 *   The UK Identifier of the searched Component used to identify set of attributes. Each set corresponds to a PLM type. 
 * <ul>
 * <li><code>E_INVALIDARG</code> return is expected if the given UK Id is invalid.</li>
 * </ul>
 * @param oRetrieveDefaultValues[out]
 *   The param which notifies if unique key attributes are the default ones when no unique key is avalaible,  or not. if TRUE, 
 *   unique key attributes are the default attributes.
 * <ul>
 * </ul>
 * @param oComponentInfos[out]
 *   The iterator which allows to loop on the queried sets in order to get values. 
 * <ul>
 * </ul>
 * @param iopErrorMonitor [inout]
 *   The ErrorMonitor dedicated to store and handle all PLM Errors raised during the execution of this service.
 * </ul>
 *
 * @return
 *   <ul>
 *   <li><code>S_OK</code> if a component was found in the database.</li>
 *   <li><code>S_FALSE</code> if no component matching the criterion was found in the database.</li>
 *   <li><code>E_FAIL</code> if an error occured. If a blocking error occured, it can be accessed through @href CATError#CATGetLastError method.</li>
 *   <li><code>E_INVALIDARG</code> if the provided <tt>iType</tt> or <tt>iQueryFilter</tt> is invalid.</li>
 *   </ul>
 *
 */
   static HRESULT GetUKOrDefaultAttributesValues(CATIAdpPLMIdentificator * iComponentIdentifier, const CATUnicodeString & iUKId,
                                              CATAdpComponentInfos  & oComponentInfos, CATBoolean & oRetrieveDefaultValues, CATIAdpErrorMonitor * iopErrorMonitor = NULL );

/** 
 * deprecated. Use API above.
 *
 */
   static HRESULT GetUKAttributesValues(CATIAdpPLMIdentificator * iComponentIdentifier, const CATUnicodeString & iUKId,
                                              CATAdpUKAttributeSetIter *& oAttributeSetIter, CATIAdpErrorMonitor * iopErrorMonitor = NULL );
};
#endif
