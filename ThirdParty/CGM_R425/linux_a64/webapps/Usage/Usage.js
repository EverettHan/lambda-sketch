define("DS/Usage/GDPR",function(){"use strict";Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});var e=["status","privacyVersion","consentCategories","blockedOnCategories","creationTimestamp"],t=["necessary","functional","advertising"],n={getCookie:function(e){var t,n,r=[];try{r=document.cookie.split("; ")}catch(e){}return(t=r.filter(function(t){return t.split("=")[0]===e})).length&&(n=t[0].split("=")[1]),n},getIndexFromRank:function(e){if(e=parseInt(e),Number.isInteger(e))return e-1;throw new Error("GDPR : Cookie rank must be an integer")},decode:function(e,r){var a=r.includes("%2C")?r.split("%2C"):r;if("consentCategories"===e)if(r)if(Array.isArray(a))a=a.map(function(e){var r=n.getIndexFromRank(e);return t[r]});else{var o=n.getIndexFromRank(r);a=o?[t[o]]:a}else a=[t[0]];return a},getModel:function(){var t=n.getCookie("TC_PRIVACY"),r=[],a={status:0,privacyVersion:"001",consentCategories:[],blockedOnCategories:1,creationTimestamp:Date.now()};if(t){var o=t.indexOf("%40")>=0?"%40":"@";r=t.split(o)}return r.forEach(function(t,r){var o=e[r];a[o]=n.decode(o,t)}),a}};return{get:n.getModel,getConsentCategories:function(){return this.get().consentCategories},isFunctionalConsent:function(){return this.getConsentCategories().includes(t[1])},hasConsent:function(){return!!this.getConsentCategories().length}}}),define("DS/Usage/Events",function(){"use strict";return{counter:{increment:"counter:increment"},timer:{start:"timer:start",stop:"timer:stop"},tracker:{creation:"tracker:creation",update:"tracker:update",getContent:"tracker:get-content",gotContent:"tracker:got-content"},page:{view:"page:view",event:"page:event",interaction:"page:interaction",performance:"page:performance"},data:{register:"data:register"},error:{runtime:"error:runtime",custom:"error:custom"}}}),define("DS/Usage/XMLHttpRequest",[],function(){return{patch:function(e,t){XMLHttpRequest.prototype.__open||XMLHttpRequest.prototype.__send||(XMLHttpRequest.prototype.__open=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(e,t){this.method=e,this.url=t,this.__open.apply(this,arguments)},XMLHttpRequest.prototype.__send=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){this.time=Date.now(),this.__onreadystatechange=this.onreadystatechange,this.onreadystatechange=function(n){try{var r=n&&n.currentTarget||{status:0,statusText:"",responseText:""};if(r.status>=400&&!this._tracked&&!this.url.startsWith(t)){var a=Date.now()-this.time;e({url:r.url,code:r.status.toString(),method:r.method,duration:a,message:r.responseText||r.statusText}),this._tracked=!0}}catch(e){}finally{this.__onreadystatechange&&this.__onreadystatechange.apply(this,arguments)}},this.onerror=function(n){try{var r=n&&n.currentTarget||{status:0,statusText:"",responseText:""};if(!this._tracked&&!this.url.startsWith(t)){var a=Date.now()-this.time;e({url:r.url,code:r.status.toString(),method:r.method,duration:a,message:r.responseText||r.statusText}),this._tracked=!0}}catch(e){}},this.__send.apply(this,arguments)})}}}),define("DS/Usage/UsageShardingManager",["DS/WebappsUtils/Inherit","DS/WebappsUtils/Utils","DS/Usage/XMLHttpRequest","DS/Usage/Events","DS/Usage/GDPR"],function(e,t,n,r,a){var o={themKey:"webapp",interactionLast10min:0,isLoadEventEndExists:!1,user:null,newVisitor:!1};const s=new Map;var c,d,p,u={scrollable:function(e){return e.clientWidth<e.offsetWidth||"scroll"==e.style.overflowY||"auto"==e.style.overflowY},getAppScrollableContainer:function(e){for(var t,n=e;n;)n.clientHeight<n.scrollHeight&&this.scrollable(n)&&(t=n),n=n.parentNode;return t||document.body},containerHeight:function(e){var t=Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight);return e.getBoundingClientRect().top+t},containerWidth:function(e){var t=Math.max(e.scrollWidth,e.offsetWidth,e.clientWidth);return e.getBoundingClientRect().left+t},viewportTop:function(e){return e.scrollTop},viewportBottom:function(e){return this.viewportTop(e)+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)},viewportLeft:function(e){return e.scrollLeft},viewportRight:function(e){return this.viewportLeft(e)+(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)}},g=function(e){var t=e.topic.split(":");return(t=t.length>2?t.slice(0,2):t).join(":")},l={flatten:function(t,n){t[n]&&Array.isArray(t[n])&&(t[n].forEach(function(n){e.extend(t,n)}),delete t[n])},flattenData:function(e){e&&e.data&&["persDimPages","persValPages","persDimPageEvents","persValPageEvents","persDimPageError","persValPageError"].forEach(function(t){l.flatten(e.data,t)})},parseQuery:function(e){var t=e.substring(e.indexOf("?")+1).split(/[&;]/),n={};return t.length&&t.forEach(function(e){var t=e.indexOf("=")+1,r=t?e.substr(t):"",a=t?e.substr(0,t-1).match(/([^\]\[]+|(\B)(?=\]))/g):[e],o=n;a&&(r=decodeURIComponent(r),a.forEach(function(e,t){e=decodeURIComponent(e);var n=o[e];t<a.length-1?o=o[e]=n||{}:Array.isArray(n)?n.push(r):o[e]=void 0!==n?[n,r]:r}))}),n},parseUrl:(d=["source","subprotocol","protocol","authority","user","password","domain","port","path","directoryPath","fileName","query","anchor"],p=new RegExp("^(?:(?:(?:([^#.:]+):)?([^#.:]+):)?//)?((?:([^:/]+)(?::([^/]*?))?@)?([^:/?#]*)(?::(\\d*))?)?((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?"),function(e){var t,n=p.exec(e),r={};for(t=0;t<d.length;t++)r[d[t]]=n[t]||"";return r.subprotocol&&(r.source=r.source.substr(r.subprotocol.length+1)),r.port||(r.port="https"===r.protocol?"443":"80"),r.directoryPath&&r.directoryPath.length>0&&(r.directoryPath=r.directoryPath.replace(/\/?$/,"/")),r.domain=r.domain.toLocaleLowerCase(),r.protocol=r.protocol.toLocaleLowerCase(),r}),clearData:function(e){e.sessions=[];var t={};e.pages.forEach(function(e){t[e.trackerscope]=e}),t=Object.keys(t).map(function(e){return t[e]}),e.pages=t.sort(function(e,t){return e.timestamp-t.timestamp}),e.interactions=[],e.events=[],e.errors=[],e.performances=[]},pruneData:function(e){e.sessions=e.sessions.slice(0,100),e.pages=e.pages.slice(0,100),e.interactions=e.interactions.slice(0,100),e.events=e.events.slice(0,100),e.performances=e.performances.slice(0,100)},getValidURL:(c=document.createElement("a"),function(e){return c.href=e,c.href}),models:[{internal:"pages",payload:"usage"},{internal:"events",payload:"usage"},{internal:"interactions",payload:"usage"},{internal:"performances",payload:"usage"},{internal:"errors",payload:"usage"},{internal:"sessions",payload:"cusage"}],getLastPageID:function(e,t){var n,r=e&&e.pages,a=[];return r&&r.length&&(a=t?r.filter(function(e){return e.trackerscope&&e.trackerscope===t}):r.filter(function(e){return!e.trackerscope})),(n=a.pop())&&n.id||""},getUTMParameters:function(){var e={},t=l.parseQuery(window.location.search);return t?(["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e):e},getTopDomain:function(){var e,t=l.parseUrl(window.location).domain,n="";if(!/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g.test(t)&&"localhost"!==t){for(e=t.split(".");e.length>2;)e.shift();n=e.join(".")}return n},getConsentsAttributes:function(){var e={};return a.isFunctionalConsent()?e={consent:!0,visitormode:"optin"}:a.hasConsent()?a.hasConsent()&&!a.isFunctionalConsent()&&(e={consent:!0,visitormode:"optout",casUser:"",cookie_vuid:"",user:""}):e={consent:!1,visitormode:"noconsent",casUser:"",cookie_vuid:""},e},getSession:function(n){return n=n||{},e.extend(n,{r_schemaName:"wasession4",r_schemaVersion:"1.62",r_service:o.service,r_timestamp:Date.now(),them:o.themKey,sessionID:t.getCookie("_dss"),cookie_vuid:t.getCookie("VUID"),user:t.getCookie("_dsu"),casUser:o.authUser?t.sha256(o.authUser):"",referrer:document.referrer,newVisitor:o.newVisitor,serverhostname:o.hostname,locale:navigator.language||"en-US",enginename:t.clientEngine.name,userAgent:t.clientEngine.userAgent,engineversion:t.clientEngine.version,userAgent:navigator.userAgent,platformname:t.clientPlatform.name,platformmobile:t.clientPlatform.mobile,resheight:t.clientPlatform.resheight,reswidth:t.clientPlatform.reswidth,navigationtype:t.navigationType,startTime:o.navigationStart}),e.extend(n,l.getUTMParameters()),e.extend(n,l.getConsentsAttributes()),n}},m={crossDomainApply:function(e){var t=["3ds.com$","solidworks.com$","solidworks.co.jp$","solidworks.co.kr$","solidworks.com.cn$","solidworks.com.tr$","solidworks.cz$","solidworks.de$","solidworks.es$","solidworks.fr$","solidworks.hu$","solidworks.it$","solidworks.pl$","home.by.me$","draftsight.com$","edrawingsviewer.com$","3dcontentcentral.cn$","3dcontentcentral.com$","3dcontentcentral.com.br$","3dcontentcentral.com.tr$","3dcontentcentral.de$","3dcontentcentral.es$","3dcontentcentral.fr$","3dcontentcentral.it$","3dcontentcentral.jp$","3dcontentcentral.kr$","3dcontentcentralsupplierbenefits.com$","3dexperienceworld.com$","lafondation3ds.org$","swugn.org$"],n=new URL(e),r=new URL(window.location.href);let a=n.hostname,s=r.hostname;for(i=0;i<t.length;i++)if(a.match(t[i])){if(s.match(t[i]))return null;return n.toString().length+o.sessionID.length+o.user.length+16>2048?null:(n.searchParams.set("3dssid",o.sessionID),n.searchParams.set("3dsvid",o.user),n.toString())}return null},crossDomainCheck:function(e){if(o.sessionID&&e.srcElement){e.srcElement.href?m.crossDomainApply(e.srcElement.href)&&(e.srcElement.href=m.crossDomainApply(e.srcElement.href)):e.srcElement.parentElement.href?m.crossDomainApply(e.srcElement.parentElement.href)&&(e.srcElement.parentElement.href=m.crossDomainApply(e.srcElement.parentElement.href)):e.srcElement.parentElement.parentElement.href&&m.crossDomainApply(e.srcElement.parentElement.parentElement.href)&&(e.srcElement.parentElement.parentElement.href=m.crossDomainApply(e.srcElement.parentElement.parentElement.href))}},startPerformanceTracking:function(){var e=this;window.setInterval(function(){o.isLoadEventEndExists||m.getLoadingPerformanceTracking.bind(e)(),Date.now()-o.interactionLast10min<6e4&&m.getResourcePerformanceTracking.bind(e)()},5e3),m.getResourcePerformanceTracking.bind(e)()},getResourcePerformanceTracking:function(){var e={initiatorType:[],blockingStatus:[],name:[],duration:[],startTime:[],transferSize:[],timeOrigin:performance.timeOrigin?Math.round(performance.timeOrigin):0};if(performance.getEntriesByType("resource").map(t=>{t.name.match("/upload$")||t.initiatorType&&t.renderBlockingStatus&&t.name&&t.duration&&t.duration>50&&(e.initiatorType.push(t.initiatorType[0]),"non-blocking"==t.renderBlockingStatus?e.blockingStatus.push("f"):e.blockingStatus.push("t"),e.name.push(t.name>2048?t.name.slice(0,2047):t.name),e.duration.push(Math.round(t.duration)),e.startTime.push(Math.round(t.startTime)),e.transferSize.push(Math.round(t.transferSize)))}),e.initiatorType.length>0){var t,n={topic:r.page.performance,data:{}};if(e.duration&&(n.data.d=e.duration),e.name&&(n.data.n=e.name),e.initiatorType&&(n.data.i=e.initiatorType),e.blockingStatus&&(n.data.b=e.blockingStatus),e.startTime&&(n.data.s=e.startTime),e.transferSize&&(n.data.ts=e.transferSize),e.timeOrigin&&(n.data.timeorigin=e.timeOrigin),!Object.keys(n.data).length)return;t={data:JSON.stringify(n)},this.readMessage(t)}performance.clearResourceTimings()},getLoadingPerformanceTracking:function(){var e,t={topic:r.page.performance,data:{}};performance.getEntriesByType("navigation")[0].fetchStart&&(t.data.fetchstart=Math.round(performance.getEntriesByType("navigation")[0].fetchStart)),performance.getEntriesByType("navigation")[0].domainLookupStart&&(t.data.domainlookupstart=Math.round(performance.getEntriesByType("navigation")[0].domainLookupStart)),performance.getEntriesByType("navigation")[0].domainLookupEnd&&(t.data.domainlookupend=Math.round(performance.getEntriesByType("navigation")[0].domainLookupEnd)),performance.getEntriesByType("navigation")[0].connectStart&&(t.data.connectstart=Math.round(performance.getEntriesByType("navigation")[0].connectStart)),performance.getEntriesByType("navigation")[0].connectEnd&&(t.data.connectend=Math.round(performance.getEntriesByType("navigation")[0].connectEnd)),performance.getEntriesByType("navigation")[0].requestStart&&(t.data.requeststart=Math.round(performance.getEntriesByType("navigation")[0].requestStart)),performance.getEntriesByType("navigation")[0].responseStart&&(t.data.responsestart=Math.round(performance.getEntriesByType("navigation")[0].responseStart)),performance.getEntriesByType("navigation")[0].responseEnd&&(t.data.responseend=Math.round(performance.getEntriesByType("navigation")[0].responseEnd)),performance.getEntriesByType("navigation")[0].domInteractive&&(t.data.dominteractive=Math.round(performance.getEntriesByType("navigation")[0].domInteractive)),performance.getEntriesByType("navigation")[0].domComplete&&(t.data.domcomplete=Math.round(performance.getEntriesByType("navigation")[0].domComplete)),performance.getEntriesByType("navigation")[0].loadEventStart&&(t.data.loadeventstart=Math.round(performance.getEntriesByType("navigation")[0].loadEventStart)),performance.getEntriesByType("navigation")[0].loadEventEnd&&(t.data.loadeventend=Math.round(performance.getEntriesByType("navigation")[0].loadEventEnd),o.isLoadEventEndExists=!0),performance.getEntriesByType("navigation")[0].name&&(t.data.pagename=performance.getEntriesByType("navigation")[0].name>2048?performance.getEntriesByType("navigation")[0].name.slice(0,2047):performance.getEntriesByType("navigation")[0].name),Object.keys(t.data).length&&(e={data:JSON.stringify(t)},this.readMessage(e))},enableUserInteraction:function(n){o.interactionLast10min=Date.now();var a=n&&n.target,i=a&&u.getAppScrollableContainer(a),s={};if(a&&l.getLastPageID(this)&&("scroll"!==n.type||i===a)){e.extend(s,{interactionid:t.uuid(),action:n.type,viewportTop:u.viewportTop(i),viewportBottom:u.viewportBottom(i),viewportLeft:u.viewportLeft(i),viewportRight:u.viewportRight(i),pageWitdh:u.containerWidth(i),pageHeight:u.containerHeight(i)}),["id","className","tagName"].forEach(function(e){var t=a[e];t&&("string"==typeof t||t instanceof String)&&(s[e]=a[e])}),["clientX","clientY"].forEach(function(e){n[e]&&(s[e]=n[e]),n.touches&&n.touches[0]&&n.touches[0][e]&&(s[e]=n.touches[0][e])});var c={topic:r.page.interaction,data:s},d={data:JSON.stringify(c)};this.readMessage(d)}},getRateLimitState:function(e){return s.get(e)},replaceRateLimitState:function(e,t,n){if(s.get(e)!==n)throw new Error("Attempted to take multiple tokens simultaneously");s.set(e,t)},update:function({tokenCount:e,timestamp:t},{RATE_LIMITER_INTERVAL:n,RATE_LIMITER_CAPACITY:r},a){const o=Math.floor((a-t)/n);var i=0;return{tokenCount:i=o>0?Math.min(e+o,r):e,timestamp:i<r?a:t}},take:function(e,t,n){var r=void 0,a=void 0;return e?(r=m.update(e,t,n).tokenCount,a=n):(r=t.RATE_LIMITER_CAPACITY,a=n),r>0&&n>=a?{tokenCount:r-1,timestamp:a}:{tokenCount:r,timestamp:a}},takeToken:function(e,t){const n=Date.now(),r=m.getRateLimitState(e),a=m.take(r,t,n);return m.replaceRateLimitState(e,a,r),!(a.tokenCount>0)},enableErrorTracking:function(e){if(!m.takeToken("error_runtime_key",{RATE_LIMITER_INTERVAL:5e3,RATE_LIMITER_CAPACITY:51})){var t,n={topic:r.error.runtime,data:{}};if(e.filename&&(n.data.source=e.filename),e.message&&(n.data.message=e.message),e.colno&&(n.data.column=e.colno),e.lineno&&(n.data.line=e.lineno),e.name&&(n.data.name=e.name),e.error&&e.error.name&&(n.data.name=e.error.name),e.stack&&(n.data.stack=e.stack),e.error&&e.error.stack&&(n.data.stack=e.error.stack),n.data.category="runtime",!Object.keys(n.data).length)return;t={data:JSON.stringify(n)},this.readMessage(t)}},enableXHRErrorTracking:function(e){var t,n={topic:r.error.runtime,data:{type:"xhr"}};if(!m.takeToken("error_XHR_key",{RATE_LIMITER_INTERVAL:5e3,RATE_LIMITER_CAPACITY:51})){if(e.url&&(n.data.targeturl=e.url),e.message&&(n.data.message=e.message),e.code&&(n.data.code=e.code),e.method&&(n.data.methodurl=e.method),e.duration&&(n.data.duration=e.duration),n.data.category="xhr",Object.keys(n.data).length<2)return;t={data:JSON.stringify(n)},this.readMessage(t)}},manageCookies:function(){var n,r=t.getCookie("_dsus"),i=t.getCookie("_dsut"),s=l.getTopDomain();r&&t.setCookie("_dss",r,s,o.sessionDuration),i&&t.setPersistantCookie("_dsu",i,s),n=t.getCookie("_dss");var c=new URL(window.location.href);let d=null;c.searchParams.has("3dsvid")&&(d=c.searchParams.get("3dsvid"),c.searchParams.delete("3dsvid"),window.history.pushState({},"",c.toString())),c.searchParams.has("3dssid")&&(n=c.searchParams.get("3dssid"),c.searchParams.delete("3dssid"),window.history.pushState({},"",c.toString())),n||(n=t.uuid(o.seed)),t.setCookie("_dss",n,s,o.sessionDuration),o.user=d||t.getCookie("_dsu"),o.user?o.newVisitor=!1:(o.user=t.uuid(),o.newVisitor=!0),a.hasConsent()&&!a.isFunctionalConsent()?t.removeCookie("_dsu",s):t.setPersistantCookie("_dsu",o.user,s),o.sessionID!==n&&(o.seed=null,o.navigationStart=Date.now(),o.sessionID=n,l.clearData(this),this.pages.length&&(this.pages=this.pages.map(function(n){return e.extend(n,{id:t.uuid(),sessionID:o.sessionID,browseTime:Date.now()-o.navigationStart,r_timestamp:Date.now(),timestamp:Date.now()})})),this.sessions.push(l.getSession()),this.send({force:!0}))}};return{sessions:[],pages:[],interactions:[],events:[],errors:[],performances:[],init:function(){console.log("Tracker.js - init - version 2.0.7");var r,a=this,i=!1;r="string"==typeof arguments[0]?{uploadPath:arguments[0],service:arguments[1],user:arguments[2]}:arguments[0]||{};try{window.top.location.protocol}catch(e){i=!0}i||(e.extend(o,{uploadPath:l.getValidURL(r.uploadPath),sessionDuration:r.sessionDuration||30,sendDebounceRate:r.sendDebounceRate||2500,userActivityThrottleRate:r.userActivityThrottleRate||5e3,userInteractionThrottleRate:r.userInteractionThrottleRate||1e3,userInteractionDebounceRate:r.userInteractionDebounceRate||500,service:r.service,authUser:r.user&&r.user.login||"",hostname:r.hostname||window.location.hostname,themKey:r.them||"webapp",seed:r.seed||null,trackXHRerrors:r.trackXHRerrors||!0,enableCrossDomain:r.enableCrossDomain||!1,navigationStart:!window.performance||window.performance&&!window.performance.timing?Date.now():window.performance.timing.navigationStart,enablePerformanceTracking:r.enablePerformanceTracking||!1}),window.addEventListener("beforeunload",a.send.bind(a,{mode:"beacon"})),window.addEventListener("message",a.readMessage.bind(a)),window.addEventListener("mousemove",t.throttle(m.manageCookies.bind(a),o.userActivityThrottleRate,!1,!0)),["click","dblclick","contextmenu","touchstart","touchend"].forEach(function(e){window.addEventListener(e,t.throttle(m.enableUserInteraction.bind(a),o.userInteractionThrottleRate,!0),!0)}),["scroll","mousemove","touchmove"].forEach(function(e){window.addEventListener(e,t.debounce(m.enableUserInteraction.bind(a),o.userInteractionDebounceRate),!0)}),window.addEventListener("error",m.enableErrorTracking.bind(a)),o.trackXHRerrors&&n.patch(m.enableXHRErrorTracking.bind(a),o.uploadPath),o.enableCrossDomain&&(window.addEventListener("mousedown",m.crossDomainCheck),window.onload=function(){window.addEventListener("mousedown",m.crossDomainCheck)}),a.sendDebounced=t.debounce(a.send.bind(a),o.sendDebounceRate),o.enablePerformanceTracking&&(m.startPerformanceTracking.bind(a)(),window.addEventListener("load",m.getLoadingPerformanceTracking.bind(a))),m.manageCookies.call(a))},readMessage:function(n){var a={};try{a=JSON.parse(n.data),l.flattenData(a)}catch(e){}if(!a.forAPI&&a.topic){switch(n.stopPropagation&&n.stopPropagation(),g(a)){case r.page.view:e.extend(a.data,{r_schemaName:"wapage3",r_schemaVersion:"1.12",r_service:o.service,r_timestamp:Date.now(),serverhostname:o.hostname,id:t.uuid(),sessionID:t.getCookie("_dss"),browseTime:Date.now()-o.navigationStart}),a.data.timestamp&&delete a.data.timestamp,this.pages.push(a.data);break;case r.page.event:e.extend(a.data,{r_schemaName:"waevent3",r_schemaVersion:"1.12",r_service:o.service,r_timestamp:Date.now(),id:t.uuid(),sessionID:t.getCookie("_dss"),sessionpageID:l.getLastPageID(this,a.data.trackerscope)}),a.data.timestamp&&delete a.data.timestamp,this.events.push(a.data);break;case r.page.interaction:e.extend(a.data,{r_schemaName:"wainteraction3",r_schemaVersion:"1.12",r_service:o.service,r_timestamp:Date.now(),sessionID:t.getCookie("_dss"),sessionpageID:l.getLastPageID(this)}),this.interactions.push(a.data);break;case r.data.register:e.extend(a.data,{r_schemaName:"wasession4",r_schemaVersion:"1.62",r_service:o.service,r_timestamp:Date.now(),sessionID:t.getCookie("_dss")}),e.extend(a.data,l.getConsentsAttributes()),this.sessions.push(a.data);break;case r.error.runtime:e.extend(a.data,{r_schemaName:"waerror3",r_schemaVersion:"1.14",r_service:o.service,r_timestamp:Date.now(),id:t.uuid(),sessionID:t.getCookie("_dss"),sessionpageID:l.getLastPageID(this),level:"error"}),this.errors.push(a.data);break;case r.error.custom:e.extend(a.data,{r_schemaName:"waerror3",r_schemaVersion:"1.14",r_service:o.service,r_timestamp:Date.now(),id:t.uuid(),sessionID:t.getCookie("_dss"),sessionpageID:l.getLastPageID(this),category:"custom"}),this.errors.push(a.data);break;case r.page.performance:e.extend(a.data,{r_schemaName:"waperformance1",r_schemaVersion:"1.03",r_timestamp:Date.now(),r_service:o.service,id:a.data.fetchstart?t.getCookie("_dss")+"-"+Math.round(performance.timeOrigin).toString():t.uuid(),sessionID:t.getCookie("_dss"),sessionpageID:l.getLastPageID(this)}),this.performances.push(a.data)}l.pruneData(this),a.sync?this.send():this.sendDebounced()}},send:function(e){var n,r=new FormData,i=e&&e.mode||"xhr",s=this,c=0;l.models.forEach(function(e){s[e.internal].forEach(function(t){r.append(e.payload+c,JSON.stringify(t)),c++})}),c&&((!a.hasConsent()||a.isFunctionalConsent()||e&&e.force)&&("beacon"===i?navigator.sendBeacon?navigator.sendBeacon(o.uploadPath,r):t.beaconPolyfill(o.uploadPath,r):((n=new XMLHttpRequest).open("POST",o.uploadPath),n.send(r))),l.clearData(this))}}}),define("DS/Usage/UsageManager",["DS/Usage/UsageShardingManager"],function(e){return{init:function(){var t;t="string"==typeof arguments[0]?{uploadPath:arguments[0],service:arguments[1],user:arguments[2]}:arguments[0]||{},e.init(t)}}}),define("DS/Usage/AbstractTracker",["DS/WebappsUtils/Inherit","DS/WebappsUtils/Promise","DS/WebappsUtils/Emitter","DS/Usage/Events"],function(e,t,n,r){"use strict";function a(e){this.name=e}return e.inherit(a,{set:function(e,t){var a;"object"==typeof e?(a=e,t=void 0):(a={})[e]=t,Object.keys(a).length>0&&(a.name=this.name,a.type=this.type,n.trigger(r.tracker.update,a))},get:function(){var e=this;return new t(function(t){var a=r.tracker.gotContent+":"+e.name,o=r.tracker.getContent+":"+e.name;n.on(a,function(r){n.off(a),r&&r.data&&r.data.name===e.name&&t(r.data)}),n.trigger(o,{name:e.name})})}}),a}),define("DS/Usage/ActionTracker",["DS/WebappsUtils/Inherit","DS/Usage/AbstractTracker","DS/WebappsUtils/Console"],function(e,t,n){"use strict";function r(e){n.warn("Module DS/Usage/ActionTracker is deprecated. Use DS/Usage/TrackerAPI#trackPageEvent instead"),t.call(this,e),this.type="action"}return e.inherit(r,t),r}),define("DS/Usage/TrackerAPI",["DS/WebappsUtils/Inherit","DS/WebappsUtils/Emitter","DS/Usage/ActionTracker","DS/Usage/Events"],function(e,t,n,r){"use strict";var a=!1,o=function(){var e=window.location,t=window.top.location;try{t.protocol}catch(e){a=!0}return a?{}:{current:e.protocol+"//"+e.hostname+(e.port?":"+e.port:""),parent:t.protocol+"//"+t.hostname+(t.port?":"+t.port:"")}}(),i=window.top;function s(e){return"string"==typeof e||e instanceof String}function c(e){return"number"==typeof e&&isFinite(e)}function d(e){return e&&"object"==typeof e&&e.constructor===Object}function p(e){return"function"==typeof e}function u(e){var t=!0;if(!d(e))return!1;if(0==Object.keys(e).length)return!1;if(Object.keys(e).length>20)return!1;for(var n in e)e.hasOwnProperty(n)&&(/^(pd|pv)[0-9]+$/.test(n)||(t=!1),s(e[n])||(t=!1));return t}function g(e){var t=!0;if(!d(e))return!1;if(0==Object.keys(e).length)return!1;if(Object.keys(e).length>20)return!1;for(var n in e)e.hasOwnProperty(n)&&(/^(pd|pv)[0-9]+$/.test(n)||(t=!1),c(e[n])||(t=!1));return t}var l={getTracker:function(){var t,a,o=arguments,i=o[0],s=o[1],c=o[2];if(void 0===c&&"object"==typeof s?(c=s,s=i,i="action"):void 0===c&&"string"==typeof s?c={}:void 0===s&&void 0===c&&("string"==typeof i?(s=i,i="action",c={}):(s=(a=e.clone(i)).name,i=a.type,c=a.options||{})),void 0===s)throw new TypeError("No tracker name specified");switch(i){case"action":var d=c;d.name=s,this.notify(d,r.tracker.creation),t=new n(s)}return t},trackPageView:function(e,t,n,c,l){var m=arguments[0];if(d(m)&&(e=m.pageURL,t=m.pageTitle,n=m.persDim,c=m.pageLanguage,l={persVal:m.persVal,appID:m.appID,tenant:m.tenant,scope:m.scope}),!a&&e&&s(e)){var h={origin:o.current,topic:r.page.view,sync:!!m.callback,data:{url:e,location:window.location.href,timestamp:Date.now(),pagelg:c||(window.dsLang?window.dsLang:"")}};t&&s(t)&&(h.data.title=t),n&&u(n)&&(h.data.persDimPages=[n]),l&&d(l)&&g(l.persVal)&&(h.data.persValPages=[l.persVal]),l&&d(l)&&l.appID&&(h.data.appID=l.appID),l&&d(l)&&l.tenant&&(h.data.tenant=l.tenant),l&&d(l)&&s(l.scope)&&(h.data.trackerscope=l.scope),i.postMessage&&i.postMessage(JSON.stringify(h),o.parent),p(m.callback)&&setTimeout(m.callback,0)}},trackPageEvent:function(e,t,n,l,m,h){var f=arguments[0];if(d(f)&&(e=f.eventCategory,t=f.eventAction,n=f.eventLabel,l=f.eventValue,m=f.persDim,h={persVal:f.persVal,appID:f.appID,tenant:f.tenant,scope:f.scope}),!a&&e&&s(e)&&t&&s(t)){var v={origin:o.current,topic:r.page.event,sync:!!f.callback,data:{category:e,action:t,timestamp:Date.now()}};n&&s(n)&&(v.data.label=n),l&&c(l)&&(v.data.value=l),m&&u(m)&&(v.data.persDimPageEvents=[m]),h&&d(h)&&g(h.persVal)&&(v.data.persValPageEvents=[h.persVal]),h&&d(h)&&h.appID&&(v.data.appID=h.appID),h&&d(h)&&h.tenant&&(v.data.tenant=h.tenant),h&&d(h)&&s(h.scope)&&(v.data.trackerscope=h.scope),i.postMessage&&i.postMessage(JSON.stringify(v),o.parent),p(f.callback)&&setTimeout(f.callback,0)}},trackPageError:function(e,t,n,c,l,m){var h=arguments[0];if(d(h)&&(e=h.errorLevel,t=h.errorMessage,n=h.errorName,c=h.errorSource,l=h.persDim,m={persVal:h.persVal,errorSourceColumn:h.errorSourceColumn,errorSourceLine:h.errorSourceLine,errorStack:h.errorStack,errorCode:h.errorCode,errorType:h.errorType,errorTargetUrl:h.errorTargetUrl,errorMethodUrl:h.errorMethodUrl,errorDuration:h.errorDuration,appID:h.appID,scope:h.scope,tenant:h.tenant}),!a&&e&&s(e)&&t&&s(t)&&n&&s(n)&&c&&s(c)){var f={origin:o.current,topic:r.error.custom,sync:!!h.callback,data:{level:e,message:t,name:n,source:c,timestamp:Date.now()}};m&&d(m)&&m.errorSourceColumn&&(f.data.column=m.errorSourceColumn),m&&d(m)&&m.errorSourceLine&&(f.data.line=m.errorSourceLine),m&&d(m)&&m.errorStack&&(f.data.stack=m.errorStack),m&&d(m)&&m.errorCode&&(f.data.code=m.errorCode),m&&d(m)&&m.errorType&&(f.data.type=m.errorType),m&&d(m)&&m.errorTargetUrl&&(f.data.targeturl=m.errorTargetUrl),m&&d(m)&&m.errorMethodUrl&&(f.data.methodurl=m.errorMethodUrl),m&&d(m)&&m.errorDuration&&(f.data.duration=m.errorDuration),m&&d(m)&&m.appID&&(f.data.appID=m.appID),m&&d(m)&&s(m.scope)&&(f.data.trackerscope=m.scope),l&&u(l)&&(f.data.persDimPageError=[l]),m&&d(m)&&g(m.persVal)&&(f.data.persValPageError=[m.persVal]),m&&d(m)&&m.tenant&&(f.data.tenant=m.tenant),i.postMessage&&i.postMessage(JSON.stringify(f),o.parent),p(h.callback)&&setTimeout(h.callback,0)}},registerData:function(){var e,t,n=arguments;!a&&n.length&&(1===n.length&&"object"==typeof n[0]?e=n[0]:n.length>1&&((e={})[n[0]]=n[1]),e&&(t={origin:o.current,topic:r.data.register,data:e},i.postMessage&&i.postMessage(JSON.stringify(t),o.parent)))},notify:function(e,t){if(!a){var n={origin:o.current,topic:t,data:e};i.postMessage&&i.postMessage(JSON.stringify(n),o.parent)}},init:function(){if(!a){var n=this;this._initiated||(this._initiated=!0,t.on("*",function(t,r){r.forAPI||n.notify(e.clone(r),t)}),window.addEventListener("message",function(e){var n={};try{n=JSON.parse(e.data)}catch(e){}n.forAPI&&(e.stopPropagation(),t.trigger(n.topic,n))}))}}};return l.init(),l});